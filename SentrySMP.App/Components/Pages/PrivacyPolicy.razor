@page "/privacy-policy"
@rendermode InteractiveServer
@inject Microsoft.JSInterop.IJSRuntime JSRuntime

<PageTitle>Privacy Policy - SentrySMP</PageTitle>

<div class="main-wrapper">
    <h1 class="main">Privacy Policy</h1>
</div>

<p>
    This page is for the Minecraft server website SentrySMP. We
    respect your privacy and protect your personal data in
    accordance with applicable laws (including GDPR).
</p>

<h2>What data we collect:</h2>
<ul>
    <li>
        <strong>Google Analytics</strong>: We track the number of
        visitors, website behavior, and approximate country
        location. This data is anonymized and used for analytics
        only.
    </li>
    <li>
        <strong>LocalStorage</strong>: We store information such as
        shopping cart contents, theme, your Minecraft username, your
        Minecraft edition, Admin credentials, and your consent status
        regarding cookies.
        </li>
        <li>
        <strong>Payment Information</strong>: When making purchases
        for coins, ranks, bundles, keys, battle pass, or ranks, transaction
        information is processed by our payment processors (PayPal
        and Stripe). We do not store your credit card details on our
        servers. All purchases, including ranks, coins, battle pass, bundles,
        and keys, can be processed through either PayPal or Stripe
        according to your preference.
        </li>
        <li>
        <strong>Minecraft Username</strong>: We collect and store
        your Minecraft username to deliver purchased items to the
        correct player account in the game and to issue invoices
        for your payments upon request.
        </li>
    </ul>

    <h2>How we use the data:</h2>
    <ul>
        <li>To analyze traffic and improve website functionality.</li>
        <li>
        To ensure proper operation of the shopping cart and remember
        your preferences.
        </li>
    <li>
        To process payments and deliver purchased items (coins,
        keys) or benefits (ranks, bundles, battle pass) to
        your Minecraft account. For all purchases, we maintain a
        record of your purchase date. Ranks have a one-month
        expiration date.
    </li>
    <li>
        To maintain records of transactions for customer support and
        administrative purposes.
    </li>
    <li>
        To distinguish between different types of purchases (coins,
        ranks, keys, bundles, battle pass) and apply
        the appropriate benefits to your account. Ranks require
        additional tracking of one-month membership period (you are
        never tracked).
    </li>
</ul>

<h2>Cookies and Consent:</h2>
<p>
    We use a cookie banner where you can accept or reject the use of
    Google Analytics. Your choice is saved in your browser's
    localStorage under the key <code>cookies-accepted</code>. This
    policy also applies to any third-party services we use.
    Currently, we only use Google Analytics, and you can review
    their
    <a href="https://policies.google.com/">Privacy Policy</a> for
    more information.
</p>
<p>
    <button class="btn btn-outline-secondary" @onclick="RemoveConsent">Remove consent</button>
</p>

<h2>Data sharing:</h2>
<p>We do not share your data with any third parties, except:</p>
<ul>
    <li>Anonymized statistics through Google Analytics.</li>
    <li>
        Payment information with our payment processors (PayPal and
        Stripe) to complete transactions. This includes purchase
        amount, and transaction identifiers.
    </li>
    <li>
        Minecraft usernames and purchased items with our game server
        to deliver your items and benefits.
    </li>
</ul>
<p>
    <strong>Payment processors:</strong> Both PayPal and Stripe have
    their own privacy policies governing how they handle your
    payment information. We encourage you to review their policies:
    <a href="https://www.paypal.com/webapps/mpp/ua/privacy-full" target="_blank">PayPal Privacy Policy</a>
    and
    <a href="https://stripe.com/privacy" target="_blank">Stripe Privacy Policy</a>.
</p>

<h2>Your rights:</h2>
<p>
    You have the right to request access to, correction, or deletion
    of your data. Contact us at
    <strong><a href="support.html">our support page</a></strong>.
</p>
<p>
    Please note that transaction records may need to be retained for
    legal and accounting purposes even if you request deletion of
    your personal data. For ranks, we must maintain records
    of your membership status to ensure your benefits remain active
    for the one-month duration and automatically remove permissions
    when your status expires.
</p>
<p>
    For data related to payments processed through PayPal or Stripe,
    you may need to contact these services directly regarding your
    rights under their respective privacy policies.
</p>
<h2>Payment Security</h2>
<p>
    All payment transactions are encrypted and processed securely
    through our payment processors. We do not store credit card
    information on our servers.
</p>
<p>
    All transaction data is protected during transmission using
    industry-standard encryption protocols.
</p>

<h2>Final Provisions</h2>
<p>
    This Privacy Policy is effective from December 16, 2025. It may be
    updated from time to time to reflect changes in our practices or
    legal requirements.
</p>

@code {
    private async Task RemoveConsent()
    {
        try
        {
            await JSRuntime.InvokeVoidAsync("analyticsConsent.removeConsentAndReload");
        }
        catch
        {
            // Fallback: try removing and reloading via eval
            try
            {
                await JSRuntime.InvokeVoidAsync("eval", "localStorage.removeItem('cookies-accepted');location.reload();");
            }
            catch { }
        }
    }
}